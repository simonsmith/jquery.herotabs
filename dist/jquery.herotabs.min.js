/*!
 * jquery.herotabs
 * version 1.2.1
 * Requires jQuery 1.7.0 or higher
 * https://github.com/simonsmith/jquery.herotabs/
 * @blinkdesign
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b(a.jQuery)}(this,function(a){"use strict";var b=0,c={delay:0,duration:0,easing:"ease-in-out",startOn:0,reverse:!1,interactEvent:"click",useTouch:!0,onSetup:null,onReady:null,css:{active:"is-active",current:"tab-current",navCurrent:"tab-nav-current",navId:"tabnav"},selectors:{tab:".js-tab",nav:".js-nav",navItem:".js-nav-item"},zIndex:{bottom:1,top:2}},d=function(a,c){this.container=a,this.options=c,this._currentTab=null,this._timer=null,this._instanceId=++b,this._opacityTransition="opacity "+parseInt(c.duration,10)/1e3+"s "+c.easing,"function"==typeof c.onSetup&&c.onSetup.call(this),this._getDOMElements(),this.nav.length>0&&(this._ariafy(),this._setCurrentNav(),this._attachNavEvents()),this._showInitialTab(c.startOn),this._attachKeyEvents(),parseInt(c.delay,10)>0&&(this.start(),this._attachHoverEvents()),a.addClass(c.css.active),a[0].style.position="relative","function"==typeof c.onReady&&c.onReady.call(this)};d.prototype={constructor:d,showTab:function(a){a=this._getTab(a);var b=this._currentTab,c=this._transitionProps;if(0==a.length||b.is(a))return this;this.tab.css(c.css,"").css("opacity",""),this._setTabVisibilty(b,this.tab.not(b)),a.show().css({position:"absolute"});var d=this,e=parseInt(this.options.duration,10);return e>0?b.one(c.js,function(){d._setTabVisibilty(a,b)}):d._setTabVisibilty(a,b),b.css(c.css,this._opacityTransition).css("opacity",0),this.triggerEvent("herotabs.show",a),this._currentTab=a,this},nextTab:function(){var a=this.tab.index(this._currentTab),b=this.tab.eq(a+1);return b=b.length>0?b:this.tab.eq(0),this.showTab(b),this.triggerEvent("herotabs.next",b),this},prevTab:function(){var a=this.tab.index(this._currentTab),b=this.tab.eq(0==a?-1:a-1);return this.showTab(b),this.triggerEvent("herotabs.prev",b),this},start:function(){var a=this.options;if(!a.delay)return this;var b=this,c=a.reverse;return this._timer=setInterval(function(){b._navItemHasFocus()||(c?b.prevTab():b.nextTab())},a.delay),this.triggerEvent("herotabs.start",this._currentTab),this},stop:function(){return clearInterval(this._timer),this.triggerEvent("herotabs.stop",this._currentTab),this},triggerEvent:function(a,b){b=this._getTab(b);var c=this.tab.index(b);this.container.trigger(a,{currentTab:b,currentTabIndex:c,currentNavItem:this.navItem.eq(c)})},_getDOMElements:function(){var a=this.options.selectors;for(var b in a)this[b]=this.container.find(a[b])},_getTab:function(a){return"number"!=typeof a?a:this.tab.eq(a)},_showInitialTab:function(a){var b=location.hash&&this.tab.filter(location.hash),c=0==b.length?this.tab.eq(a):b;this.tab.css("top",0),this._setTabVisibilty(c,this.tab.not(c)),this.triggerEvent("herotabs.show",c),this._currentTab=c},_setTabVisibilty:function(a,b){var c=this.options,d=c.css,e=c.zIndex;a.addClass(d.current).css({"z-index":e.top,position:"relative"}).attr("aria-hidden",!1).find("a").andSelf().attr("tabindex","0"),b.removeClass(d.current).css({"z-index":e.bottom}).hide().attr("aria-hidden",!0).find("a").andSelf().attr("tabindex","-1")},_ariafy:function(){var a=this.options.css.navId+this._instanceId+"-";this.nav[0].setAttribute("role","tablist"),this.navItem.attr("role","presentation").find("a").each(function(b){this.id=a+(b+1),this.setAttribute("role","tab")}),this.tab.each(function(b){this.setAttribute("role","tabpanel"),this.setAttribute("aria-labelledby",a+(b+1))})},_transitionProps:function(){var a="transition",b=document.createElement("div");if(a in b.style)return{css:a,js:"transitionend"};for(var c={transition:"transitionend",webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},d=["Moz","webkit","O"],e=a.charAt(0).toUpperCase()+a.substr(1),f={},g=0,h=d.length;h>g;++g){var i=d[g]+e;i in b.style&&(f.js=c[i],f.css="-"+d[g].toLowerCase()+"-"+a)}return f}(),_attachHoverEvents:function(){var a=this;this.container.on("mouseenter",function(){a.stop(),a.triggerEvent("herotabs.mouseenter",a._currentTab)}),this.container.on("mouseleave",function(){a.start(),a.triggerEvent("herotabs.mouseleave",a._currentTab)})},_attachKeyEvents:function(){var a=this;this.nav.on("keydown","a",function(b){switch(b.keyCode){case 37:case 38:a.prevTab();break;case 39:case 40:a.nextTab()}})},_isTouchEnabled:function(){return"ontouchstart"in document.documentElement&&this.options.useTouch},_getEventType:function(){var a={hover:"mouseenter",touch:"touchstart",click:"click"};return this._isTouchEnabled()?a.touch:a[this.options.interactEvent]},_attachNavEvents:function(){var b=this.nav,c=this._getEventType(),d=this.options,e=this;b.on(c,"a",function(b){e.showTab(a(this).parents(d.selectors.navItem).index()),e._checkUrlIsAnchor(this.href)&&(b.preventDefault(),b.stopPropagation())})},_isAnchorRegex:/#[A-Za-z0-9-_]+$/,_checkUrlIsAnchor:function(a){return this._isAnchorRegex.test(a)},_navItemHasFocus:function(){return a(document.activeElement).closest(this.container).is(this.container)},_setCurrentNav:function(){var a=this,b=this.options,c=b.css.navCurrent,d=this.navItem;a.container.on("herotabs.show",function(b,e){d.removeClass(c).find("a").each(function(){this.setAttribute("aria-selected","false"),this.setAttribute("tabindex","-1")});var f=d.eq(e.currentTabIndex).addClass(c).find("a");f[0].setAttribute("aria-selected","true"),f[0].setAttribute("tabindex","0"),a._navItemHasFocus()&&f.focus()})}},void 0==d.prototype._transitionProps.css&&(d.prototype.showTab=function(a){a=this._getTab(a);var b=this._currentTab,c=this.options;if(0==a.length||b.is(a))return this;this.tab.stop(!0,!0),a.show().css({position:"absolute",opacity:1});var d=this;return b.animate({opacity:0},c.duration,function(){d._setTabVisibilty(a,b)}),this.triggerEvent("herotabs.show",a),this._currentTab=a,this}),a.fn.herotabs=function(b){return b=a.extend(!0,{},c,b),this.each(function(){var c=a(this);c.data("herotabs",new d(c,b))})},a.fn.herotabs.defaults=c,a.fn.herotabs.Herotabs=d});